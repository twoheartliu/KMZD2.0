<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>孔孟之道--草稿箱播放器</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" href="../css/swiper.min.css">
    <style>
        html,
        body {
            overflow: hidden;
            background: url(../image/play/play_bg_tra.jpg) no-repeat;
            background-size: 100% 100%;
        }

        .clear {
            clear: both;
        }

        #wrap {
            -webkit-background-size: cover;
            background-size: cover;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-flex-flow: column;
            flex-flow: column;
        }

        #main {
            position: relative;
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
        }
        /*header {
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            height: 50px;
        }

        header div {
            font-size: 14px;
            color: #fff;
            text-align: center;
            line-height: 49px;
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
        }

        header i {
            display: block;
            width: 53px;
            height: 49px;
        }

        header .back {
            background: url(../image/play/navi_back.png) no-repeat;
            -webkit-background-size: contain;
            background-size: contain;
        }

        header .more {
            background: url() no-repeat;
            -webkit-background-size: contain;
            background-size: contain;
        }*/

        header {
            height: 50px;
            line-height: 50px;
            background-color: transparent;
            overflow: hidden;
            /*overflow: hidden;*/
        }

        .egret-img {
            display: block;
            float: left;
            /*padding-left: 18px;*/
            width: 45px;
            height: 50px;
        }

        .egret-imgs {
            display: block;
            float: right;
            width: 45px;
            height: 50px;
            /*padding-left: 18px;*/
        }

        .egret-img img {
            width: 15px;
            height: 20px;
            padding: 15px;
        }

        .egret-txt {
            display: block;
            margin: 0 auto;
            width: 75%;
            color: #fff;
            text-align: center;
            line-height: 50px;
            height: 50px;
            font-size: 16px;
            /*vertical-align: top;*/
        }

        .header_fr {
            width: 30px;
            height: 30px;
            padding: 10px 20px 10px 10px;
            line-height: 30px;
            font-size: 15px;
            color: #fff;
            position: absolute;
            right: 5px;
            bottom: -0px;
            /*display: inline-block;*/
            /*display: none;*/
        }

        .header_fr img {
            width: 100%;
        }

        #action {
            margin-bottom: 10px;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
        }

        #action li {
            text-align: center;
            color: #cbcbcb;
            font-size: 12px;
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            /*padding-top: 30px;*/
            background-position: center top;
            background-repeat: no-repeat;
            -webkit-background-size: 25px;
            background-size: 25px;
            position: relative;
        }

        #action li>i {
            position: absolute;
            top: -2px;
            right: 30%;
            width: 10px;
            height: 10px;
            display: inline-block;
            font-style: normal;
            font-size: 12px;
            color: #fff;
        }

        #action li>img {
            width: 25px;
        }
        /*#action .collect {
            text-align: center;
            color: #cbcbcb;
            font-size: 12px;
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            padding-top: 0px;
            background-position: center top;
            background-repeat: no-repeat;
            -webkit-background-size: 25px;
            background-size: 25px;
        }*/
        /*#action .timer {
            background-image: url(../image/play_choice.png);
        }*/
        /*#action .timer.focus {
            background-image: url(../image/play_choice.png);
        }*/
        /*#action .share {
            background-image: url(../image/play/ic_play_share.png);
        }*/
        /*#action .share.focus {
            background-image: url(../image/img/ic_play_share_s.png);
        }*/
        /*#action .checkin {
            background-image: url(../image/discuss.png);
        }*/
        /*#action .checkin.focus {
            background-image: url(../image/play_discuss.png);
        }*/

        #control {
            /*background-color: #672d32;*/
        }

        #slider {
            height: 50px;
            position: relative;
        }

        #slider span {
            position: absolute;
            bottom: 0;
            font-size: 12px;
            color: #ccc;
        }

        #slider .s {
            left: 10px;
        }

        #slider .e {
            right: 10px;
        }

        #panel {
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            padding: 30px 0 40px;
        }

        #panel li {
            width: 30px;
            height: 30px;
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            background-position: center;
            background-repeat: no-repeat;
            -webkit-background-size: 30px;
            background-size: 30px;
        }

        #panel .list {
            background-image: url(../image/play/ic_play_schedule.png);
            -webkit-background-size: 25px;
            background-size: 25px;
        }
        /*#panel .list.focus {
            background-image: url(../image/img/ic_play_schedule_s.png);
        }*/

        #panel .prev {
            background-image: url(../image/play/ic_play_pre.png);
        }
        /*#panel .prev.focus {
            background-image: url(../image/img/ic_play_pre_s.png);
        }*/
        /*#panel .play {
            background-image: url(../image/play/ic_play_play.png);
        }*/
        /*#panel .play.focus {
            background-image: url(../image/img/ic_play_play_s.png);
        }*/

        #panel .pause {
            background-image: url(../image/play/ic_play_pause.png);
        }
        /*#panel .pause.focus {
            background-image: url(../image/img/ic_play_pause_s.png);
        }*/

        #panel .buffer {
            background-image: none;
        }

        @-webkit-keyframes rotate {
            from {
                -webkit-transform: rotate(0deg);
            }
            to {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        #panel .buffer:before {
            content: '';
            display: inline-block;
            width: 100%;
            height: 100%;
            background: url(../image/play/ic_play_buffer.png) no-repeat center;
            -webkit-background-size: contain;
            background-size: contain;
            -webkit-animation: rotate 4s linear infinite;
            animation: rotate 4s linear infinite;
        }
        /*#panel .buffer.focus {
            background-image: url(../image/img/ic_play_buffer_s.png);
        }*/

        #panel .next {
            background-image: url(../image/play/ic_play_next.png);
        }
        /*#panel .next.focus {
            background-image: url(../image/img/ic_play_next_s.png);
        }*/

        #panel .download {
            background-image: url(../image/play_choice.png);
        }
        /*#panel .download.focus {
            background-image: url(../image/play_choice.png);
        }*/

        #chat {
            overflow: hidden;
            border-top: 1px solid #845253;
        }

        #chat a {
            float: right;
            padding: 10px;
            font-size: 12px;
            color: #ccc;
        }

        #main .wrap {
            position: absolute;
            margin: auto;
            width: 100%;
            bottom: 0;
            top: 0;
            height: 60px;
        }

        #main h1 {
            font-size: 20px;
            color: #fff;
            text-align: center;
        }

        #main label {
            display: block;
            text-align: center;
            font-size: 14px;
            color: #ccc;
            padding-top: 20px;
        }
        /*轮播图        */

        .swiper-container {
            width: 100%;
            text-align: center;
            height: 250px;
            margin-top: 75px;
        }

        .swiper-container img {
            width: 240px;
            /*margin-top: 50px;*/
        }
        /*#secHeader {
            width: 100%;
            height: 50px;
            background-image: url(../image/play/header.png);
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }*/

        .swiper-slide .play-txt p {
            color: #fff;
            text-align: left;
            font-size: 15px;
            padding: 5px;
        }

        .play-list p {
            color: #fff;
            text-align: left;
            padding: 5px;
        }

        .swiper-slide {
            overflow: auto;
        }

        .play-txt,
        .play-list {
            padding: 0 50px;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 63%;
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            position: absolute;
            bottom: 4px;
            left: 18%;
            height: 5px;
            /*这个属性设置使填充进度条时的图形为圆角*/
            /*background: -webkit-linear-gradient(#059CFA, #059CFA) no-repeat;*/
            /*background: -webkit-linear-gradient(#059CFA, #059CFA) no-repeat;*/
            /*background-size: 0% 100%;*/
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 15px;
            width: 15px;
            margin-top: -5px;
            /*使滑块超出轨道部分的偏移量相等*/
            background: #ffffff;
            border-radius: 50%;
            /*外观设置为圆形*/
            border: solid 0.025em rgba(205, 224, 230, 0.5);
            /*设置边框*/
            box-shadow: 0 .025em .025em #3b4547;
            /*添加底部阴影*/
        }

        input[type=range]:focus {
            outline: none;
        }

        input[type=range]::-webkit-slider-runnable-track {
            height: 5px;
            border-radius: 2.5px;
            /*将轨道设为圆角的*/
            /*box-shadow: 0 1px 1px #def3f8, inset 0 .125em .125em #0d1112;*/
            /*轨道内置阴影效果*/
        }

        input[type=range]::-ms-fill-lower {
            /*进度条已填充的部分*/
            height: 15px;
            border-radius: 5px;
            /*background: linear-gradient(to right, #ff0000, #1abc9c 100%, #123);*/
            /*background: red !important;*/
        }

        input[type=range]::-ms-fill-upper {
            /*进度条未填充的部分*/
            height: 15px;
            /*border-radius: 10px;*/
            background: #ffffff;
        }

        input[type=range]:focus::-ms-fill-lower {
            background: linear-gradient(to right, #059CFA, white 100%, white);
        }

        input[type=range]:focus::-ms-fill-upper {
            background: #ffffff;
        }

        input[type=range]::-moz-range-progress {
            /*background: linear-gradient(to right, #059CFA, white 100%, white);*/
            height: 5px;
            /*border-radius: 10px;*/
        }

        .red {
            background: #89211b;
        }

        #player {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>

<body id="body">
    <!-- <div id="wrap" class="mh"> -->
    <!-- <img src="" alt=""> -->
    <!-- <header class="qx" id="secHeader">
            <i class="back" tapmode onclick="api.closeWin();"></i>
            <div id="title">
            </div>
            <i class="more"></i>
        </header> -->
    <header id="secHeader" class="clear">
        <div class="egret-img"><img src="../image/icon_back.png" alt="" onclick="api.closeWin();"></div>
        <div class="egret-txt" id="title">
        </div>
        <div class="header_fr" onclick="fnOpenPlayShare; ">
            <img src="../image/KM__play_share.png" alt="">
        </div>
    </header>
    <div id="wrap" class="mh">
        <div id="main" class="qx">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="../image/play/poster.png" alt="">
                    </div>
                    <div class="swiper-slide">
                        <div class="play-txt">
                            <p id="geci"></p>
                            <!-- <p>无所往，其来复吉；</p> -->
                        </div>
                    </div>
                    <!-- <div class="swiper-slide">
                        <div class="play-list" id="sousuoliebiao">
                            <p>1152 周易上经 乾卦第一.mp3</p>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
        <ul id="action" class="qx">
            <li class="collect">
                <img src="../image/KM_play_collect.png" alt="" id="playCollect" onclick="fnOpenPlayCollect();">
                <p>收藏</p>
            </li>
            <li class="share" tapmode="focus" onclick="fnOpenAddListening(); ">
                <img src="../image/KM__play_add.png" alt="">
                <p>添加到听单</p>
            </li>
            <li class="collect">
                <img src="../image/KM_play_dianzan.png" alt="" id="playDz" onclick="fnOpenPlayDz();">
                <p>点赞</p>
            </li>
            <li class="checkin" tapmode="focus" onclick="fnOpenPlayDiscuss();">
                <!-- <img src="../image/discuss_detail.png" alt=""  > -->
                <img src="../image/KM_play_discuss.png" alt="">
                <i>20</i>
                <p>评论</p>
            </li>
            <li class="timer" tapmode="focus" onclick="fnOpenChoicePlayer();">
                <img src="../image/KM_play_choice.png" alt="">
                <p>切换国学机</p>
            </li>
        </ul>
        <div id="control" class="qx">
            <div id="slider">
                <span class="s" id="kaishijishi">
                  00:00
                </span>
                <input type="range" id="range" name="range" min="0" max="100" step="1" value="0.01" class="red" />
                <span class="e" id="zongshichang">
                  00:00
                </span>
            </div>
            <ul id="panel">
                <li class="list" tapmode="focus" onclick="openRadioList()"></li>
                <li class="prev" tapmode="focus" onclick="fnOpenPlayershangyi()"></li>
                <li class="play" tapmode="focus" id="openplayer"></li>
                <li class="next" tapmode="focus" onclick="fnOpenPlayerxiayi()"></li>
                <li><img src="../image/play/play_change0.png" alt="" id="img"></li>
            </ul>
        </div>
    </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/swiper.min.js"></script>
<script type="text/javascript" src="../script/zepto.js"></script>
<script type="text/javascript" src="../script/audio2.js"></script>
<script type="text/javascript">
    var radios = ['see_you_again', 'new_soul', 'i_am_you'];
    var dqbfid;
    var zongJindu;
    var dangqianbofangid;
    var aa;
    var bofangs;
    var a;
    var id;
    var bofangmoshi;
    var Dqbofangid;
    apiready = function() {
        var secHeader = $api.byId('secHeader');
        $api.fixStatusBar(secHeader);
        var headerH = $api.offset(secHeader).h;
        var audioPlayer = api.require('audioPlayer');
        var headerPosH = $api.offset(secHeader).h;
        var header = document.querySelector('header');
        $api.fixIos7Bar(header);
        if (window.innerHeight)
            winHeight = window.innerHeight;
        else if ((document.body) && (document.body.clientHeight))
            winHeight = document.body.clientHeight;
        var messageFrameDiv = $api.byId('wrap');
        var winHeightHeader = winHeight - headerPosH;
        $api.css(messageFrameDiv, 'height:' + winHeightHeader + 'px;');
        api.addEventListener({
            name: 'netPlaying'
        }, function(ret, err) {
            fnDangQianbofangid(ret.value.playing);
        });
        var DangQianbofangid = api.pageParam.DangQianbofangid;
        if (DangQianbofangid) {
            fnJinRuBofangs(DangQianbofangid);
        } else {
            api.addEventListener({
                name: 'neizhiliebiaoPlaysss'
            }, function(ret, err) {
                aa = ret.value.a;
                bofangs = ret.value.bofang;
                fnA(aa, bofangs);
                fnAAaa(aa, bofangs);
                return;
            });
            fnJinRuBofang();
        }
    }

    function fnDangQianbofangid(id) {
        Dqbofangid = id;
    }

    function fnJinRuBofangs(id) {
        var eHeader = $api.byId('header');
        api.parseTapmode();
        var stylelist = $api.byId('openplayer');
        var html = '<img src="../image/play/ic_play_pause.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
        $api.html(stylelist, html);
        if (id) {
            api.sendEvent({
                name: 'netPlayingCgx',
                extra: {
                    id: id
                }
            });
        }
        fnInitSwiper();
        fnOpenChangeImg();
        fnbofangshijian();
        fnJiBenXinXi()
        jindutiao();
    }

    function fnJinRuBofang(bofang) {
        var eHeader = $api.byId('header');
        if (bofang) {
            var bofang = bofang;
        } else {
            var bofang = api.pageParam.bofang;
        }
        dqbfid = api.pageParam.a;
        a = api.pageParam.a;
        var id = api.pageParam.cgxid;
        if (id) {
            api.sendEvent({
                name: 'netPlayCgx',
                extra: {
                    id: id
                }
            });
        }
        fnInitSwiper();
        fnOpenChangeImg();
        api.parseTapmode();
        if (!bofang) {
            var stylelist = $api.byId('openplayer');
            var html = '';
            html += '<img src="../image/play/ic_play_pause.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
            $api.html(stylelist, html);
            bofang = 5;
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: id,
                }
            });
            fnNetAudiosPlayByID(id);
        } else if (bofang == 4) {
            var stylelist = $api.byId('openplayer');
            var html = '';
            html += '<img src="../image/play/ic_play_play.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
            $api.html(stylelist, html);
        } else if (bofang == 5) {
            var stylelist = $api.byId('openplayer');
            var html = '';
            html += '<img src="../image/play/ic_play_pause.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
            $api.html(stylelist, html);
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: a,
                }
            });
            fnNetAudiosPlayByID(id);
        }
        api.sendEvent({
            name: 'neizhiliebiaoPlay',
            extra: {
                bofang: bofang,
                a: a
            }
        });
        fnNetAudiosPlayByID(id);
        fnbofangshijian();
        fnJiBenXinXi()
        jindutiao();
        if (dangqianbofangid) {
            dqbfid = dangqianbofangid;
        }

    }
    //内置列表页选择播放
    function fnA(a, bofangs) {
        aa = a;
        bofang = bofangs;
        dqbfid = aa;
        id = aa;
        if (id) {
            api.sendEvent({
                name: 'netPlayCgx',
                extra: {
                    id: id
                }
            });
        }
        fnInitSwiper();
        fnOpenChangeImg();
        api.parseTapmode();
        if (!bofang) {
            var stylelist = $api.byId('openplayer');
            var html = '';
            html += '<img src="../image/play/ic_play_pause.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
            $api.html(stylelist, html);
            bofang = 5;
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: id
                }
            });
            fnNetAudiosPlayByID(id);
        } else if (bofang == 4) {
            var stylelist = $api.byId('openplayer');
            var html = '';
            html += '<img src="../image/play/ic_play_play.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
            $api.html(stylelist, html);
        } else if (bofang == 5) {
            var stylelist = $api.byId('openplayer');
            var html = '';
            html += '<img src="../image/play/ic_play_pause.png" alt="" onclick="fnOpenPlayer();" id="player"></div>';
            $api.html(stylelist, html);
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: a
                }
            });
            fnNetAudiosPlayByID(id);
        }
        fnbofangshijian();
        fnJiBenXinXi()
        jindutiao();
        if (dangqianbofangid) {
            dqbfid = dangqianbofangid;
        }
    }

    function fnAAaa(a, bofangs) {
        bofang = bofangs;
        dqbfid = a;
        id = a;
    }
    //播放时间,总时长
    function fnbofangshijian() {
        api.addEventListener({
            name: 'bofangshijian'
        }, function(ret, err) {
            //播放时间
            if (ret.value.bofangshijian) {
                var stylelist = $api.byId('kaishijishi');
                var html = ret.value.bofangshijian;
                $api.html(stylelist, html);
            }
        });
        //总时长
        api.addEventListener({
            name: 'zongJinDusss'
        }, function(ret, err) {
            if (ret.value.html) {
                var stylelist = $api.byId('zongshichang');
                var html = ret.value.html;
                $api.html(stylelist, html);
            }
        });
    }

    //赋值歌词\标题
    function fnJiBenXinXi() {
        api.addEventListener({
            name: 'jibenxinxi'
        }, function(ret, err) {
            if (ret) {
                //赋值歌词
                if (ret.value.desc) {
                    var str1 = JSON.stringify(ret.value.desc);
                    var str2 = str1.replace(/n/g, '<br>');
                    var str3 = str2.split('\\').join('');
                    var str4 = str3.split("\"").join('');
                    var stylelist = $api.byId('geci');
                    var html0 = str4;
                    $api.html(stylelist, html0);
                }
                //赋值标题
                if (ret.value.titlename) {
                    var stylelist = $api.byId('title');
                    var html2 = ret.value.titlename;
                    $api.html(stylelist, html2);
                }
            }
        });
    }
    //播放、暂停
    function fnOpenPlayer() {
        var player = $api.byId('player');
        if (player.getAttribute("src", 2) == "../image/play/ic_play_play.png") {
            player.src = "../image/play/ic_play_pause.png";
            var bofang = 5;
            var a = api.pageParam.a;
            api.sendEvent({
                name: 'netPlay',
                extra: {
                    bofang: bofang,
                    a: a
                }
            });
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: a,
                }
            });
            var zaicibf;
            api.sendEvent({
                name: 'zaicibf',
                extra: {
                    zaicibf: zaicibf,
                    a: a,
                }
            });
            fnOpenChangeImg();
        } else {
            player.src = "../image/play/ic_play_play.png";
            var netAudioPausess = '';
            api.sendEvent({
                name: 'netAudioPause',
                extra: {
                    netAudioPausess: netAudioPausess
                }
            });
            var bofang = 4;
            var a = api.pageParam.a;
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: a,
                }
            });
        }
    }
    //进度条
    function jindutiao() {
        api.addEventListener({
            name: 'zongJinDu'
        }, function(ret, err) {
            if (ret) {
                var range = $api.byId('range');
                var lenth = ret.value.lenth;
                var cur = ret.value.cur;
                var a = cur / lenth;
                var ccc = JSON.stringify(cur / lenth * 100);
                if (ccc > 0) {
                    range.value = ccc;
                }
                var sssss = 100 - range.value;
                //不渐变
                // range.style.background = 'linear-gradient(to left, #89211b ' + sssss + '%, #000 0,#000  )';
                // range.css( 'background', 'linear-gradient(to right, #059CFA, white ' + range.value + '%, white)' );
                range.style.background = 'linear-gradient(to left, #89211b ' + sssss + '%, blue ' + range.value + '%,#789  )';
                fnZongJinDu(lenth);

            }
        });
    }

    function fnZongJinDu(lenth) {
        zongJindu = lenth;
    }
    //调整播放进度
    function adjust() {
        var range = $api.byId('range');
        var x = range.value / 100;
        var playTime = x * zongJindu;
        api.sendEvent({
            name: 'playTime',
            extra: {
                playTime: playTime
            }
        });
    }
    //上一曲
    function fnOpenPlayershangyi() {
        var player = $api.byId('player');
        player.src = "../image/play/ic_play_pause.png";
        var c = 1;
        api.sendEvent({
            name: 'GeDanshangyi',
            extra: {
                c: c
            }
        });
        fnOpenChangeImg();
    }
    //下一曲
    function fnOpenPlayerxiayi() {
        var c = 2;
        api.sendEvent({
            name: 'GeDanxiayi',
            extra: {
                c: c
            }
        });
        var player = $api.byId('player');
        player.src = "../image/play/ic_play_pause.png";
        fnOpenChangeImg();
    }
    //播放
    function fnNetAudiosPlayByID(id) {
        var stylelist = $api.byId('list');
        var html = '';
        if (id) {
            var bofang = 5;

            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: id,

                }
            });
            fnJiBenXinXi()
            fnbofangshijian();
        } else {
            var bofang = 5;
            var a = api.pageParam.a;
            api.sendEvent({
                name: 'neizhiliebiaoPlay',
                extra: {
                    bofang: bofang,
                    a: a,
                }
            });
            fnJiBenXinXi();
            fnbofangshijian();

        }
    }

    // 轮播
    function fnInitSwiper() {
        var mySwiper = new Swiper('.swiper-container', {
            loop: false,
        });
    };
    // 切换单曲循环、顺序播放、随机播放
    function fnOpenChangeImg() {
        var image_urls = ["../image/play/play_change0.png", "../image/play/play_change2.png"];
        // 初始化数组键值 (0 = 第一个图片)
        var idx = 0;
        if (!bofangmoshi) {
            bofangmoshi = 0;
            api.sendEvent({
                name: 'bofangmoshi',
                extra: {
                    bofangmoshi: bofangmoshi
                }
            });
            // 点击 id 为 img 的图片
            document.getElementById("img").onclick = function() {
                // idx + 1，如果为最后一张，还原回第一张
                idx = idx === image_urls.length - 1 ? 0 : idx + 1;
                // 设置 src
                this.src = image_urls[idx];
                if (idx == 1) {
                    bofangmoshi = 2;
                    api.sendEvent({
                        name: 'bofangmoshi',
                        extra: {
                            bofangmoshi: bofangmoshi
                        }
                    });
                } else {
                    bofangmoshi = 0;
                    api.sendEvent({
                        name: 'bofangmoshi',
                        extra: {
                            bofangmoshi: bofangmoshi
                        }
                    });
                }
            };
        } else {
            // 点击 id 为 img 的图片
            document.getElementById("img").onclick = function() {
                // idx + 1，如果为最后一张，还原回第一张
                idx = idx === image_urls.length - 1 ? 0 : idx + 1;
                // 设置 src
                this.src = image_urls[idx];
                if (idx == 1) {
                    var bofangmoshi = 2;
                    api.sendEvent({
                        name: 'bofangmoshi',
                        extra: {
                            bofangmoshi: bofangmoshi
                        }
                    });
                } else {
                    var bofangmoshi = 0;
                    api.sendEvent({
                        name: 'bofangmoshi',
                        extra: {
                            bofangmoshi: bofangmoshi
                        }
                    });
                }
            };
        }
    }
    // 选择播放器
    function fnOpenChoicePlayer() {
        api.openWin({
            name: 'choicePlayer',
            url: './choice_player.html',
        });
    };
    // 收藏
    function fnOpenPlayCollect() {
        var playCollect = $api.byId('playCollect');
        if (playCollect.getAttribute("src", 2) == "../image/KM_play_collect.png") {
            playCollect.src = "../image/KM_play_collect_red.png";
            api.toast({              
                msg:   '收藏成功',
                              duration:  2000,
                              location:   'middle'          
            });
        } else {
            playCollect.src = "../image/KM_play_collect.png";
        }
    };
    // 点赞
    function fnOpenPlayDz() {
        var playDz = $api.byId('playDz');
        if (playDz.getAttribute("src", 2) == "../image/KM_play_dianzan.png") {
            playDz.src = "../image/KM_play_dianzan_red.png";
            api.toast({              
                msg:   '点赞成功',
                              duration:  2000,
                              location:   'middle'          
            });
        } else {
            playDz.src = "../image/KM_play_dianzan.png";
        }
    };
    // 打开评论页面
    function fnOpenPlayDiscuss() {
        api.openWin({
            name: 'discussNoticeDetail0',
            url: './discuss_notice_detail0.html',
            pageParam: {
                name: 'test'
            }
        });
    }
    //打开分享
    function fnOpenPlayShare() {
        var dialogBox = api.require('dialogBox');
        dialogBox.actionMenu({
            rect: {
                h: 150
            },
            texts: {
                cancel: '取消'
            },
            items: [{
                text: '微信',
                icon: 'widget://image/weixin.png'
            }, {
                text: 'QQ',
                icon: 'widget://image/qq.png'
            }, {
                text: '朋友圈',
                icon: 'widget://image/friends.png'
            }],
            styles: {
                bg: '#FFF',
                column: 3,
                itemText: {
                    color: '#000',
                    size: 12,
                    marginT: 8
                },
                itemIcon: {
                    size: 30
                },
                cancel: {
                    bg: 'fs://icon.png',
                    color: '#000',
                    h: 44,
                    size: 14
                }
            },
            tapClose: true
        }, function(ret) {
            if (ret.eventType == 'cancel') {
                dialogBox.close({
                    dialogName: 'discount'
                });
            }
            if (ret.index == "0") {
                dialogBox.close({
                    dialogName: 'alert'
                });
            } else if (ret.index == "1") {
                dialogBox.close({
                    dialogName: 'alert'
                });
            } else if (ret.index == "2") {
                dialogBox.close({
                    dialogName: 'alert'
                });
            } else {
                dialogBox.close({
                    dialogName: 'alert'
                });
            }
            // dialogBox.close({
            //     dialogName: 'alert'
            // })
            // alert(JSON.stringify(ret))

        });
    }
    //添加到听单
    function fnOpenAddListening() {
        api.openWin({
            name: 'addListening',
            url: './add_listening.html',
            pageParam: {
                name: 'test'
            }
        });
    }

    //打开播放列表
    function openRadioList() {
        var height = api.frameHeight + 50;
        if (Dqbofangid) {
            api.openFrame({
                name: 'playcgx_radiolist',
                url: './playcgx_radiolist.html',
                bounces: false,
                bgColor: 'rgba(0,0,0,0.6)',
                rect: {
                    x: 0,
                    y: 0,
                    w: api.frameWidth,
                    h: height
                },
                pageParam: {
                    Dqbofangid: Dqbofangid
                }
            });
        } else {
            api.openFrame({
                name: 'playcgx_radiolist',
                url: './playcgx_radiolist.html',
                bounces: false,
                bgColor: 'rgba(0,0,0,0.6)',
                rect: {
                    x: 0,
                    y: 0,
                    w: api.frameWidth,
                    h: height
                },
            });
        }
    }
</script>
<script>
    var change = function($input) {
        /*内容可自行定义*/
        adjust();
    }
    $('input').RangeSlider({
        callback: change
    });
</script>

</html>
