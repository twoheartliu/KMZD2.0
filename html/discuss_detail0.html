<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="copyright" content="www.apicloud.com" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no" />
    <title>孔孟之道--听单评论详情</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <style>
        html,
        body {
            min-height: 100%;
            background: #ebebeb;
        }

        .fr {
            float: right;
        }

        .fl {
            float: left;
        }

        .clear {
            clear: both;
        }

        .mt5 {
            margin-top: 5px;
        }

        .mt10 {
            margin-top: 10px;
        }

        .mt15 {
            margin-top: 15px;
        }

        .mt20 {
            margin-top: 20px;
        }

        .ml5 {
            margin-left: 0.5em;
        }

        .mr5 {
            margin-right: 0.5em;
        }

        .hdivider {
            width: 100%;
            height: 1px;
            background-color: #e0e0e0;
        }

        .br {
            border-right: 1px solid #e0e0e0;
        }

        .bb {
            border-bottom: 1px solid #e0e0e0;
            height: 1px;
        }

        .toRight {
            right: 0;
        }

        .row {
            display: -webkit-box;
            display: -webkit-flex;
        }

        .col {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            margin: 0 5px;
            position: relative;
        }

        .swiper-container img {
            width: 100%;
        }
        /* 头部 */

        .nomessage {
            margin-top: 20px;
            font-size: 0.8em;
            text-align: center;
            color: #999;
        }

        .topbar {
            background: #89211b;
            height: 50px;
            border-bottom: 1px solid #89211b;
            position: relative;
        }

        .egret-img {
            position: absolute;
        }

        .egret-img img {
            width: 15px;
            height: 20px;
            padding: 15px;
            vertical-align: top;
        }

        .egret-header-title {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 50px;
            color: #fff;
            font-size: 20px;
        }
        /*中间内容*/

        nav {
            height: 70px;
            padding: 8px;
            background-color: #fff;
        }

        .nav-left .nav-img {
            display: inline-block;
            width: 70px;
            height: 70px;
        }

        .nav-left .nav-txt {
            display: inline-block;
            vertical-align: top;
            width: 150px;
            line-height: 35px;
        }

        .nav-right {
            line-height: 80px;
        }

        .nav-tit {
            height: 32px;
            padding-left: 8px;
            line-height: 32px;
        }

        .nav-txt>p {
            color: #535354;
        }

        .nav-txt>p:nth-child(2) {
            color: #ccc;
        }

        .sec-tit {
            height: 40px;
            line-height: 40px;
            padding-left: 8px;
        }

        .sec-discuss {
            background-color: #fff;
            padding: 8px;
        }

        .sec-img {
            display: inline-block;
        }

        .sec-txt {
            display: inline-block;
        }

        .sec-txt>p {
            color: #999;
        }

        .sec-txt>p:nth-child(2) {
            color: #ccc;
        }

        .dis-right>span {
            color: #ccc;
        }

        .dis-txt {
            margin-left: 40px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
            color: #535354;
        }

        footer {
            width: 100%;
            height: 50px;
            line-height: 50px;
        }
    </style>
</head>

<body>
    <header class="egret-header topbar" id="notHeader">
        <div class="egret-header-title">评论</div>
        <div class="egret-img"><img src="../image/icon_back.png" alt="" onclick="goback()"></div>
    </header>

</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
    function goback() {
        api.closeWin({
            name: 'discussDetail0'
        });
    }
    var albumId;
    var uris;
    var name;
    var ok;
    apiready = function() {
        var notHeader = $api.byId('notHeader');
        var headeris = document.querySelector('#notHeader');
        $api.fixIos7Bar(headeris);
        $api.fixStatusBar(headeris);
        $api.fixStatusBar(notHeader);
        albumId = api.pageParam.albumId;
        name = api.pageParam.name;
        uris = api.pageParam.uris;
        ok = api.pageParam.ok;
        // listeningCover = api.pageParam.listeningCover;
        var listening = api.pageParam.listeningCover;
        var album = api.pageParam.albumCover;
        // console.log(album);
        // console.log(listening);
        if (!listening) {
            listeningCover = listening
        }
        if (!album) {
            listeningCover = album
        }
        // console.log(listeningCover);
        var oks = 'ok'+ok;
        api.addEventListener({
            name: oks
        }, function(ret, err) {
          if(ret.value.wangluo){
            fnOpenMessageNotDetail(albumId);
            api.openFrame({
                name: 'ReplyToComments',
                url: './ReplyToComments.html',
                rect: {
                    x: 0,
                    y: api.frameHeight - 55,
                    w: 'auto',
                    h: 'auto'
                },
                pageParam: {
                    albumId: albumId,
                    uris: uris,
                    name: name
                },
                bounces: false,
                bgColor: 'rgba(0,0,0,0)',
                vScrollBarEnabled: false,
                hScrollBarEnabled: false
            });
          }
        });

        var connectionType = api.connectionType;
        if(connectionType == "none"){
        	netWorkNone(ok);
        }else{
          fnOpenMessageNotDetail(albumId);
          api.openFrame({
              name: 'ReplyToComments',
              url: './ReplyToComments.html',
              rect: {
                  x: 0,
                  y: api.frameHeight - 55,
                  w: 'auto',
                  h: 'auto'
              },
              pageParam: {
                  albumId: albumId,
                  uris: uris,
                  name: name
              },
              bounces: false,
              bgColor: 'rgba(0,0,0,0)',
              vScrollBarEnabled: false,
              hScrollBarEnabled: false
          });
        }

    }

    function fnOpenMessageNotDetail(albumId) {
        var nHeader = $api.byId('notHeader');
        var headerH = $api.offset(nHeader).h;
        uris = api.pageParam.uris;
        api.openFrame({
            name: 'discussDetailFrame0',
            url: './discuss_detail_frame0.html',
            rect: {
                x: 0,
                y: headerH,
                w: 'auto',
                h: 'auto'
            },
            pageParam: {
                albumId: albumId,
                uris: uris,
                name: name,
                listeningCover: listeningCover,
            },
            bounces: false,
            bgColor: 'rgba(0,0,0,0)',
            vScrollBarEnabled: true,
            hScrollBarEnabled: true
        });
    }
</script>

</html>
